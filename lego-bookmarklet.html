<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGO Bookmarklet</title>
    <link rel="icon" type="image/x-icon" href="https://cloudinary.com/favicon.ico">
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 0px;
            line-height: 1.6;
        }
        h1 {
            color: #333;
        }
        .bookmarklet-link {
            display: table;
            padding: 15px 30px;
            background: #ffd500;
            color: #000;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 16px;
            margin: 20px 0;
            transition: background 0.2s;
        }
        .bookmarklet-link:hover {
            background: #ffed4e;
        }
        .instructions {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        .instructions h2 {
            margin-top: 0;
        }
        .instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        .instructions li {
            margin: 10px 0;
        }
        .logo-container {
            text-align: center;
            margin: 30px 0;
        }
        .logo-container img {
            max-width: 100px;
            height: auto;
        }
        .arrow-container {
            position: relative;
            text-align: left;
            margin: 20px 0;
        }
        .arrow-up {
            display: inline-block;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 20px solid #000000;
            position: relative;
            animation: bounce 2s infinite;
        }
        .arrow-up::after {
            content: '';
            position: absolute;
            top: 20px;
            left: -2px;
            width: 4px;
            height: 20px;
            background: #000000;
        }
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        .arrow-label {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="arrow-container">
        <div class="arrow-up"></div>
        <a href="javascript:void%20function(){(function(){(function(a){function%20b(){var%20b=h.value.trim()||%22YOUR%20MESSAGE%20HERE%22,d=j.value.trim()||%22YOUR%20SIGNATURE%22;document.body.removeChild(c),a(b,d)}var%20c=document.createElement(%22div%22);c.style=%22position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:999999;display:flex;align-items:center;justify-content:center;%22;var%20d=document.createElement(%22div%22);d.style=%22background:%23fff;color:%23000;padding:20px;border-radius:12px;width:420px;max-width:90%25;font-family:system-ui;display:flex;flex-direction:column;gap:14px;position:relative;%22;var%20e=document.createElement(%22button%22);e.innerHTML=%22\xD7%22,e.style=%22position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%25;border:1px%20solid%20%23ccc;background:%23fff;color:%23666;font-size:24px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;transition:all%200.2s;%22,e.onmouseover=function(){this.style.background=%22%23f5f5f5%22,this.style.color=%22%23000%22,this.style.borderColor=%22%23999%22},e.onmouseout=function(){this.style.background=%22%23fff%22,this.style.color=%22%23666%22,this.style.borderColor=%22%23ccc%22},e.onclick=function(){document.body.removeChild(c)};var%20f=document.createElement(%22h3%22);f.textContent=%22Cloudinary%20Generator%22,f.style=%22margin:0%200%2010px%200;font-size:20px;color:%23111;%22;var%20g=document.createElement(%22label%22);g.textContent=%22MESSAGE:%22,g.style=%22font-weight:600;font-size:14px;%22;var%20h=document.createElement(%22textarea%22);h.style=%22width:100%25;height:120px;font-size:14px;padding:10px;border-radius:8px;border:1px%20solid%20%23ccc;resize:vertical;%22,h.placeholder=%22YOUR%20MESSAGE%20HERE%22;var%20i=document.createElement(%22label%22);i.textContent=%22SIGNATURE:%22,i.style=%22font-weight:600;font-size:14px;%22;var%20j=document.createElement(%22input%22);j.type=%22text%22,j.style=%22width:100%25;font-size:14px;padding:8px;border-radius:8px;border:1px%20solid%20%23ccc;%22,j.placeholder=%22YOUR%20SIGNATURE%22;var%20k=document.createElement(%22button%22);k.textContent=%22Generate%20Video%22,k.style=%22padding:10px%2016px;font-size:14px;border-radius:10px;border:none;background:%23ffd500;color:%23000;font-weight:700;cursor:pointer;margin-top:10px;%22,k.onclick=b,h.onkeydown=function(a){%22Enter%22!==a.key||a.shiftKey||(a.preventDefault(),b())},j.onkeydown=function(a){%22Enter%22===a.key%26%26(a.preventDefault(),b())},d.appendChild(e),d.appendChild(f),d.appendChild(g),d.appendChild(h),d.appendChild(i),d.appendChild(j),d.appendChild(k),c.appendChild(d),document.body.appendChild(c)})(function(a,b){function%20c(a){return%20a%3F0===a.indexOf(%22//%22)%3Flocation.protocol+a:0===a.indexOf(%22http://%22)||0===a.indexOf(%22https://%22)%3Fa:location.origin+a:null}function%20d(a){return%20a.split(%22%3F%22)[0]}function%20e(a){return%20a%3Fa.replaceAll(%22%2525%22,%22%252525%22).replaceAll(%22%255C%22,%22%25255C%22).replaceAll(%22%252C%22,%22%25252C%22).replaceAll(%22%252F%22,%22%25252F%22).replaceAll(%22%2523%22,%22%252523%22).replaceAll(%22%253F%22,%22%25253F%22).replaceAll(%22%2521%22,%22%252521%22).replaceAll(%22!%22,%22%252521%22):%22%22}function%20f(a){var%20b=btoa(unescape(encodeURIComponent(a)));return%20b.replace(/\+/g,%22-%22).replace(/\//g,%22_%22).replace(/=+$/g,%22%22)}function%20g(a){return(10%3Ea%3F%220%22:%22%22)+a}a=a||%22YOUR%20MESSAGE%20HERE%22,b=b||%22YOUR%20SIGNATURE%22;var%20h=encodeURIComponent(a),j=encodeURIComponent(b);console.log(%22msgRaw:%20%22+a),console.log(%22sigRaw:%20%22+b),console.log(%22msgEnc%20encodeURIComponent:%20%22+h),console.log(%22sigEnc%20encodeURIComponent:%20%22+j);var%20k=e(h),l=e(j);console.log(%22msgEsc%20cldEscape:%20%22+k),console.log(%22sigEsc%20cldEscape:%20%22+l);var%20m,n=Array.prototype.slice.call(document.querySelectorAll(%22img%22)),o=[];for(m=0;m%3Cn.length;m++){var%20p=c(n[m].currentSrc||n[m].src);p%26%26/https%3F:\/\/www\.lego\.com\/cdn\/cs\/set\/assets\//i.test(p)%26%26o.push(p)}var%20q={},r=[];for(m=0;m%3Co.length;m++)q[o[m]]||(q[o[m]]=1,r.push(o[m]));if(!r.length)return%20void%20alert(%22No%20LEGO%20product%20images%20found%20\uD83D\uDE22%22);var%20t=[];for(m=0;m%3Cr.length;m++)t.push(d(r[m]));var%20u=t.slice(0,4),v=[];for(m=0;m%3Cu.length;m++)v.push(f(u[m]));var%20w=function(a){for(var%20b,c=0;c%3Ca.length;c++)if(b=a[c].match(/\/(\d{4,})\//)||a[c].match(/set[_-]%3F(\d{4,})/i),b%26%26b[1])return%20b[1];var%20d=window.location.href,e=d.match(/\/(\d{4,})\//)||d.match(/product[_-]%3F(\d{4,})/i);return%20e%26%26e[1]%3Fe[1]:%22lego%22}(0%3Ct.length%3Ft:r),x=function(a){var%20b=new%20Date,c=b.getFullYear(),d=g(b.getMonth()+1),e=g(b.getDate()),f=g(b.getHours()),h=g(b.getMinutes()),i=g(b.getSeconds()),j=a.toLowerCase()+%22-%22+(c+%22-%22+d+%22-%22+e+%22-%22+f+h+i)+%22.mp4%22;return%20j=j.replace(/[^a-z0-9-.]/g,%22-%22).replace(/-+/g,%22-%22),j}(w),y=%22https://res.cloudinary.com/gpene-lego/video/upload/$msg_!MSG!,$signature_!SGN!/if_isndef_$msg/$msg_!YOUR%2520MESSAGE%2520HERE!/if_end/if_isndef_$signature/$signature_!YOUR%2520SIGNATURE!/if_end/du_3/c_fill,ar_1,w_1080/l_video:10317_v1/c_fill,ar_1,w_1080/fl_layer_apply/ac_none/fl_splice,l_blank_pixel,du_2/c_pad,ar_1,w_1080,b_rgb:ffd500/l_brand-lego/fl_layer_apply/fl_layer_apply,so_0/fl_splice,l_fetch:__IMG1__,du_1/c_pad,ar_1,w_1080,b_white/fl_layer_apply/fl_splice,l_fetch:__IMG2__,du_1/c_pad,ar_1,w_1080,b_white/fl_layer_apply/fl_splice,l_fetch:__IMG3__,du_1/c_pad,ar_1,w_1080,b_white/fl_layer_apply/fl_splice,l_fetch:__IMG4__,du_1/c_pad,ar_1,w_1080,b_white/fl_layer_apply/fl_splice,l_blank_pixel,du_2/c_pad,ar_1,w_1080,b_white/l_text:CeraPro-Bold.woff2_40:$(msg),co_black,c_fit,w_400,h_500/fl_layer_apply,g_west,y_-100,x_100/l_text:CeraPro-Bold.woff2_60:$(signature),co_black/fl_layer_apply,g_south_west,y_200,x_100/l_santa/w_400/fl_layer_apply,g_north_east,x_100,y_100/l_brand-lego/w_250/fl_layer_apply,g_south_east,x_100,y_100/fl_layer_apply/v1/cld-sample-video.mp4%22;y=y.replace(/MSG/g,k).replace(/SGN/g,l),y=y.replace(/cld-sample-video\.mp4/g,%22cld-sample-video/%22+x),y=y.replace(%22video/upload%22,%22videos%22);var%20z=[],A=document.querySelectorAll(%22video,source%22);for(m=0;m%3CA.length;m++){var%20B=c(A[m].src);B%26%26z.push(B)}var%20C=document.querySelectorAll(%22a[href*='.mp4']%22);for(m=0;m%3CC.length;m++){var%20D=c(C[m].getAttribute(%22href%22));D%26%26z.push(D)}var%20E=/https%3F:\/\/www\.lego\.com\/cdn\/cs\/set\/assets\/.*\.mp4/i,F=[];for(q={},m=0;m%3Cz.length;m++)E.test(z[m])%26%26!q[z[m]]%26%26(q[z[m]]=1,F.push(z[m]));if(F.length){var%20G=d(F[0]),H=f(G);y=y.replace(/l_video:10317_v1%3F/g,%22l_video:fetch:%22+H)}v[0]%26%26(y=y.replace(/__IMG1__/g,v[0])),v[1]%26%26(y=y.replace(/__IMG2__/g,v[1])),v[2]%26%26(y=y.replace(/__IMG3__/g,v[2])),v[3]%26%26(y=y.replace(/__IMG4__/g,v[3]));var%20I=document.createElement(%22div%22);I.style=%22position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.85);z-index:999999;display:flex;align-items:center;justify-content:center;overflow:auto;padding:20px;%22;var%20J=document.createElement(%22div%22);J.style=%22background:%23111;color:%23eee;padding:30px;border-radius:12px;max-width:90vw;max-height:90vh;width:960px;font-family:system-ui;display:flex;flex-direction:column;align-items:center;gap:1.5rem;box-shadow:0%200%2040px%20rgba(0,0,0,.8);position:relative;%22;var%20K=document.createElement(%22button%22);K.innerHTML=%22\xD7%22,K.style=%22position:absolute;top:10px;right:10px;width:32px;height:32px;border-radius:50%25;border:1px%20solid%20%23666;background:%23222;color:%23eee;font-size:24px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;transition:all%200.2s;z-index:10;%22,K.onmouseover=function(){this.style.background=%22%23333%22,this.style.color=%22%23fff%22,this.style.borderColor=%22%23999%22},K.onmouseout=function(){this.style.background=%22%23222%22,this.style.color=%22%23eee%22,this.style.borderColor=%22%23666%22},K.onclick=function(){document.body.removeChild(I)};var%20L=document.createElement(%22h2%22);L.textContent=%22Cloudinary%20Personalised%20Video%20Greeting%20Card%22,L.style=%22margin:0;font-size:24px;color:%23eee;text-align:center;%22;var%20M=document.createElement(%22video%22);M.id=%22cldVideo%22,M.controls=!0,M.style=%22max-width:100%25;max-height:70vh;border-radius:12px;box-shadow:0%200%2024px%20rgba(0,0,0,.7);background:%23000;%22;var%20N=document.createElement(%22source%22);N.src=y,N.type=%22video/mp4%22,M.appendChild(N);var%20O=document.createElement(%22div%22);O.style=%22display:flex;gap:.75rem;flex-wrap:wrap;justify-content:center;%22;var%20P=document.createElement(%22a%22);P.textContent=%22Open%20URL%22,P.href=y,P.target=%22_blank%22,P.className=%22btn%22,P.style=%22cursor:pointer;font-size:14px;padding:.6rem%201.3rem;border-radius:999px;border:1px%20solid%20%23eee;background:%23eee;color:%23111;font-weight:600;text-decoration:none;%22;var%20Q=document.createElement(%22a%22);Q.textContent=%22Download%22,Q.download=x,Q.href=y,Q.target=%22_blank%22,Q.className=%22btn%22,Q.style=%22cursor:pointer;font-size:14px;padding:.6rem%201.3rem;border-radius:999px;border:1px%20solid%20%23eee;background:%23eee;color:%23111;font-weight:600;text-decoration:none;%22,O.appendChild(P),O.appendChild(Q),J.appendChild(K),J.appendChild(L),J.appendChild(M),J.appendChild(O),I.appendChild(J),document.body.appendChild(I),I.onclick=function(a){a.target===I%26%26document.body.removeChild(I)},setTimeout(function(){try{function%20c(a){var%20b=a.match(/\/(v\d+)\//);if(b){var%20c=b[1],d=parseInt(c.substring(1),10);return%20a.replace(/\/(v\d+)\//,%22/v%22+(d+1)+%22/%22)}return%20a}var%20a=document.getElementById(%22cldVideo%22);if(!a)return;var%20b=!1;a.oncanplaythrough=function(){if(b)return%20void%20a.play().catch(function(a){console.log(%22Autoplay%20prevented:%22,a)});b=!0;var%20d=a.currentSrc||a.src;if(d){var%20e=c(d);a.src=e,Q%26%26(Q.href=e.replace(%22fl_layer_apply/v%22,%22fl_layer_apply/fl_attachment/v%22)),P%26%26(P.href=e),a.load()}},a.onloadeddata=function(){3%3C=a.readyState%26%26!b%26%26a.oncanplaythrough()},a.load()}catch(a){console.error(%22Error%20setting%20up%20video:%22,a)}},500)})})()}();" class="bookmarklet-link">LEGO Video Generator</a>
        <div class="arrow-label">Drag this button to your bookmark bar â†‘</div>
    </div>
    
    <div class="logo-container">
        <img src="https://res.cloudinary.com/gpene-lego/image/upload/v1764262925/brand-lego.svg" alt="LEGO Logo">
    </div>
    <h1>LEGO Greeting Card Video Generator</h1>    
    
    <div class="instructions">
        <h2>How to use:</h2>
        <ol>
            <li>Drag the "LEGO Video Generator" link above to your browser's bookmarks bar</li>
            <li>Visit a LEGO product page on <a href="https://www.lego.com/en-dk/product/the-going-merry-pirate-ship-75639" target="_blank">lego.com</a></li>
            <li>Click the bookmarklet in your bookmarks bar</li>
            <li>Enter your message and signature when prompted</li>
            <li>The personalized video will be generated and displayed</li>
        </ol>
    </div>
</body>
</html>
