define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,o){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[7461],{64443:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"information-banner":["main.close","header.usp.chat.title","header.usp.chat","header.usp.shipping.title","header.usp.shipping.AbTest","header.usp.retour.title","header.usp.retour"]}},16313:function(e,t,n){"use strict";n.r(t),n.d(t,{EVENT_BANNER_CANCEL_LINK:function(){return R},EVENT_BANNER_CLICK_LINK:function(){return M},default:function(){return O}});var o=n(82151),r=n(12650),a=n(37798),i=n(12604),s=n(22303),c=n.n(s),l=n(68747),u=n(85234),d=n(16197),m=n(23087),h=n(98376),p=n(56766),f=n(51535),g=n(72279),b=n(90240),_=n(9543);let E,k;!function(e){e.inherit="inherit",e.default="default",e.monochromeDark="monochromeDark",e.monochromeLight="monochromeLight"}(E||(E={})),function(e){e.inherit="inherit",e.hebe="hebe",e.sephora="sephora",e.designer="designer",e.test="test",e.light="light",e.dark="dark",e.monochrome="monochrome"}(k||(k={}));const N="_DM",y=(E.inherit,E.default,E.monochromeLight,E.monochromeDark,k.inherit,k.hebe,k.sephora,k.designer,k.test,k.inherit,k.light,k.dark,k.monochrome,k.inherit,E.inherit,"{#countdown}");function x(e){return e<10?"0"+e:String(e)}function C(e,t){const n=function(e,t){if(!t)return"";const n=Date.parse(t);if(isNaN(n))return"";const o=Math.max(n-e,0),r=Math.floor(o/1e3);return[Math.floor(r/3600),Math.floor(r/60)%60,r%60].map(x).join(":")}(t,e.publicationEnd);return e.text.replace(y,n)}var S=e=>{let{onClose:t,onLinkClick:n,onLoad:o,banner:a}=e;r.useEffect(o,[]);const[i,s]=r.useState(Date.now());r.useEffect((()=>{if(a.text.includes(y)){const e=setTimeout((()=>s(Date.now())),1e3);return()=>clearTimeout(e)}}));const E=a.text.includes(y)?C(a,i):a.text;return r.createElement("div",{"data-testid":"information-banner",className:N,style:{background:a.backgroundColor,maxWidth:"100vw"}},r.createElement("div",{className:l.eCg},r.createElement("div",{className:c()(_.wZ,l.O7B)},r.createElement("div",{className:c()(b.Iu,l.T5m,l.tfz,l.czu,l.i2P,u.cRY,u.yyM)},r.createElement(d.ZP,{tag:"p",preset:m.j3.bodyExtraSmall,font:m.Zx.sansSerif,dangerouslySetInnerHTML:{__html:E.replace("<a href",'<a style="text-decoration:none" href')},style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"},onClick:e=>{"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),n())}})),a.isCloseable&&r.createElement("div",{style:{paddingRight:0},className:c()(l.T5m,l.w7R,b.C0)},r.createElement(f.Z,{"aria-label":__("main.close"),preset:g.Wn.transparent,label:__("main.close"),size:"small",onClick:t,type:"button"},r.createElement(p.Z,{src:h.Z,style:{width:16,height:16}}))))))},v=n(56926);function L(e){return{name:v.eF,context:e}}const T="header";function w(e){return t={customCategory:T,customLabel:"infobanner."+e},{name:v.RX,context:t};var t}var B=n(8779),I=n(57575);var D=e=>{let{track:t}=e;return r.createElement("div",{"data-testid":"usp-bar",className:c()(I.ROZ,B.kO,B.QA)},r.createElement("div",{className:l.eCg},r.createElement("div",{className:c()(l.O7B,_.wZ),style:{height:"32px",lineHeight:"32px"}},r.createElement(d.ZP,{className:c()(l.T5m,l.pQ6,b.WJ,I.xSJ),preset:m.j3.bodyExtraSmallBold,color:m.d9.secondary,key:"chat",title:__("header.usp.chat.title"),dangerouslySetInnerHTML:{__html:__("header.usp.chat")},onClick:()=>t(L({customCategory:T,customLabel:"usp.support"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),r.createElement(d.ZP,{className:c()(l.T5m,l.pQ6,b.Iu,I.xSJ),preset:m.j3.bodyExtraSmallBold,color:m.d9.secondary,key:"shipping",title:__("header.usp.shipping.title"),dangerouslySetInnerHTML:{__html:__("header.usp.shipping.AbTest")},onClick:()=>t(L({customCategory:T,customLabel:"usp.shipping"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),r.createElement(d.ZP,{className:c()(l.T5m,l.pQ6,b.C0,I.xSJ),preset:m.j3.bodyExtraSmallBold,color:m.d9.secondary,key:"retour",title:__("header.usp.retour.title"),dangerouslySetInnerHTML:{__html:__("header.usp.retour")},onClick:()=>t(L({customCategory:T,customLabel:"usp.returns"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}))))};const M="header:banner:click-link",R="header:banner:cancel-link";var O=(0,o.tile)().withQueries((e=>{let{context:t,ruleData:n}=e;return{data:{query:i,variables:{url:t.navigation.url.href,navigationTargetGroup:t.intent.navigationTargetGroup},doNotBatch:!0}}})).withTracking((e=>({resolve:()=>({context:{id:e.entity.id}})}))).withProcessDependencies(((e,t)=>{let{tools:{cookies:n},ruleData:{hideUspBar:o}}=t;var r;const a=n.get("information_banner_closed")||{},i=null==e||null==(r=e.data)?void 0:r.informationBanner;return{action:"render",data:{informationBanner:i,closedBanners:a,isBannerClosed:!!i&&i.id in a,hideUspBar:o}}})).withRender((e=>{let{data:{informationBanner:t,isBannerClosed:n,closedBanners:i,hideUspBar:s},tools:{cookies:c,tracking:l}}=e;const[u,d]=r.useState(n),m=l.track,h=null==t?void 0:t.campaignName,p=Object.keys(i).filter((e=>{const t=i[e]||"";return new Date<new Date(t)})).reduce(((e,t)=>(e[t]=i[t]||"",e)),{});return t&&!u?r.createElement(S,{banner:t,onClose:()=>{(0,o.requestIdleCallback)((()=>{d(!0),(null==t?void 0:t.id)&&(i[t.id]=t.publicationEnd,c.set("information_banner_closed",{...p,[t.id]:t.publicationEnd},365),m(function(e){return L({customCategory:T,customActionSuffix:"close",customLabel:"infobanner."+e})}(h)))}))},onLoad:()=>{m(w(h))},onLinkClick:()=>{a.trigger(M,{banner:t}),m(function(e){return L({customCategory:T,customLabel:"infobanner."+e})}(h),{useBeacon:!0});const e=t.text.match(/<a\s+(?:[^>]*?\s+)?href='([^']*)'/),n=e&&e[1];if(n){let e=!1;a.on(R,(()=>{e=!0})),setTimeout((()=>{e||(window.location.href=n)}),200)}}}):s?null:r.createElement(D,{track:m})}))},12604:function(e){e.exports={id:"58e717ba99b1eba45844d73d4912779735e9107fa0fe96814bc67f234c330c2a"}},22303:function(t){"use strict";t.exports=e},12650:function(e){"use strict";e.exports=t},82151:function(e){"use strict";e.exports=n},37798:function(e){"use strict";e.exports=o}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[2782],(function(){return t(64443),t(16313)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/information-banner/index-fca9acc4973939ef065b.map